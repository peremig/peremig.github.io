<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<meta property="og:title" content="Dictats autocorrectius amb GNU/Linux">
<title>Dictats autocorrectius amb GNU/Linux</title>
<meta property="og:description" content="    Avui dia, el dictat és un procediment que té poc prestigi (potser és perquè durant el segle XX per aquí hi va haver abundor de dictadors, o potser és per...">
<meta property="og:url" content="http://peremig.github.io/howto/2013/03/02/dictats-autocorrectius.html">
<meta property="og:site_name" content="Buscant pingüins al pol nord">
<meta property="og:locale" content="ca_ES">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@">
<meta name="twitter:creator" content="@">
<meta name="twitter:title" content="Dictats autocorrectius amb GNU/Linux">
<meta name="twitter:description" content="    Avui dia, el dictat és un procediment que té poc prestigi (potser és perquè durant el segle XX per aquí hi va haver abundor de dictadors, o potser és per...">
<meta name="twitter:url" content="http://peremig.github.io/howto/2013/03/02/dictats-autocorrectius.html">

<meta name="keywords" content="Linux, debian, català">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="http://peremig.github.io/howto/2013/03/02/dictats-autocorrectius.html">
<link rel="alternate" type="application/atom+xml" title="Buscant pingüins al pol nord" href="http://peremig.github.io/feed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script language="Javascript" type="text/javascript">
function search_google()
{
  var query = document.getElementById("google-search").value;
  window.open("http://google.com/search?q=" + query
      + "%20site:" + "http://peremig.github.io");
}
</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>


<script type='text/javascript'>
var blocklink = ['http://humanorightswatch.org','http://o-o-6-o-o.com','http://darodar.com','http://blackhatworth.com','http://hulfingtonpost.com','http://bestwebsitesawards.com','http://darodar.com','http://buttons-for-website.com','http://ilovevitaly.co','http://semalt.com','http://priceg.com','http://simple-share-buttons.com','http://googlsucks.com','http://4webmasters.org','http://aliexpress.com','http://addons.mozilla.org/en-US/firefox/addon/ilovevitaly/','http://free-share-buttons.com','http://buttons-for-your-website.com','http://theguardlan.com','http://buy-cheap-online.info','http://best-seo-offer.com'];
for (var b = blocklink.length; b--;) {
  if (document.referrer.match(blocklink[b]))
    window.location = "http://www.google.com";
}
</script>




</head>


<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">Buscant pingüins al pol nord</a></h1>
    <h3 class="site-meta">Les aventures d'un professor de català amb Linux i el xinès</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">Inici</a>
        
        
        
        <a class="page-link" href="/about/">Qui sóc?</a>
        
        
        
        <a class="page-link" href="/archives/">Arxiu</a>
        
        
        
        <a class="page-link" href="/categories/">Categories</a>
        
        
        
        <a class="page-link" href="/tags/">Etiquetes</a>
        
        
        
        <a class="page-link" href="/guestbook/">Llibre de visites</a>
        
        
        
        <a class="page-link" href="/feed.xml">Segueix-me</a>
        
        
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 itemprop="name" class="post-title">Dictats autocorrectius amb GNU/Linux</h1>
    <meta itemprop="keywords" content="dictat,iconv,rename,sed,wdiff" />
    <p class="post-meta">
    Publicat a
    
    <a href="/categories/#howto">howto</a>&nbsp;
     
    
    i etiquetat
    
    <a href="/tags/#dictat" title="dictat">dictat </a>, 
    
    <a href="/tags/#iconv" title="iconv">iconv </a>, 
    
    <a href="/tags/#rename" title="rename">rename </a>, 
    
    <a href="/tags/#sed" title="sed">sed </a>, 
    
    <a href="/tags/#wdiff" title="wdiff">wdiff </a>
    
    
    <time itemprop="datePublished" datetime="2013-03-02">
    el 2 Mar, 2013
    </time>
    </p>
  </header>

  <article class="post-content" itemprop="articleBody">
    <div style="text-align:center">
  <p><img src="https://deixebledetux.files.wordpress.com/2013/03/dictat.jpg?w=221&amp;h=160" alt="Dictat" /></p>
</div>

<div style="text-align:justify">

  <p>Avui dia, el dictat és un procediment que té poc prestigi (potser és perquè durant el segle XX per aquí hi va haver abundor de dictadors, o potser és perquè el més pesat de tot és haver-los de corregir); malgrat tot, encara és una pràctica útil que relaciona com cap altra el so amb la grafia que el representa.</p>

  <p>Com acabo d’apuntar, el més pesat del dictat és la seva correcció. La combinació d’unes poques eines sota GNU/Linux ens automatitzen aquesta tasca tan pesada (i més encara si volem). I, el que és més interessant, és que utilitzarem el format text pla (TXT).</p>

  <!-- more -->

  <p>El procés a seguir és el següent:</p>

  <ol>
    <li>Es fa el dictat (pot ser a càrrec del professor o, fins i tot, a través de síntesi de veu).</li>
    <li>Es fa una comparació automatitzada amb el text que s’ha dictat.</li>
    <li>Es retorna als alumnes .</li>
  </ol>

  <p>Necessitem tres aplicacions:</p>

  <ul>
    <li><strong>iconv</strong> (només si el nostres alumnes utilitzen Windows o qualsevol altre sistema que encara no codifiqui amb UTF-8)</li>
    <li><strong>wdiff</strong></li>
    <li><strong>sed</strong></li>
    <li><strong>rename</strong></li>
  </ul>

  <p>Els meus alumnes, que treballen amb ordinadors de l’Educat 1×1 (després va ser Educat  2.0), empren gairebé sempre l’entorn Windows, per la qual cosa, codifiquen el text en Latin-1. El primer pas a fer consiteix en canviar la codificació a UTF-8, cosa que, des de la terminal es fa amb l’ordre:</p>

  <p><code>iconv -f LATIN1 -t UTF-8 -o FITXERi.utf FIXTER.latin1</code></p>

  <p>Com que tenim més d’un alumne, farem la conversió dins d’un bucle (assumim que tots els fitxers dels alumnes tenen l’extensió TXT):</p>

  <p><code>for i in $( ls *.txt); do iconv -f LATIN1 -t UTF-8 -o $i.utf $i; done</code></p>

  <p>El següent pas,  seria ja corregir-los el dictat. Per fer-ho, comparem els fitxers dels alumnes amb el fitxer que contindrà el text correcte que els hem dictat. Aquesta comparació es fa mot a mot (d’aquí que s’utilitzi wdiff i no pas diff). Aquesta utilitat ens dóna diferents opcions de sortida:</p>

  <ul>
    <li>tot el text amb els inputs incorrectes al costat del correctes sense estadístiques encert / error</li>
    <li>tot el text amb els inputs incorrectes al costat del correctes amb estadístiques encert / error</li>
    <li>tot el text amb les formes correctes de les errades (però sense mostrar-ne la forma errònia que ha introduït l’alumne)</li>
    <li>només les errades amb les formes correctes al costat (separades per línies i sense mostrar la resta del text)</li>
  </ul>

  <p>Les ordres corresponents són:</p>

  <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>wdiff -1 dictat_original dictat_alumne.txt <span class="c">#tot el text amb els inputs incorrectes al costat del correctes sense estadístiques encert / error </span>

<span class="nv">$ </span>wdiff -s dictat_original dictat_alumne.txt <span class="c">#tot el text amb els inputs incorrectes al costat del correctes amb estadístiques encert / error </span>

<span class="nv">$ </span>wdiff -2 dictat_original dictat_alumne.txt <span class="c">#tot el text amb les formes correctes de les errades (però sense mostrar-ne la forma errònia que ha introduït l’alumne)</span>

<span class="nv">$ </span>wdiff -3 dictat_original dictat_alumne.txt <span class="c">#només les errades amb les formes correctes al costat (separades per línies i sense mostrar la resta del text)</span></code></pre></div>

  <p>Les ordres anteriors en mostraran la comparació en pantalla, però com el que ens interessarà serà produir un nou document per analitzar-lo (ja sigui per nosaltres o pels alumnes), emprarem la redirecció a fitxer de la sortida, per exemple:</p>

  <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>wdiff -3 dictat_original dictat_alumne.txt &gt; dictat_corregit.txt</code></pre></div>

  <p>Però, perquè ens sigui realment útil, tot això s’hauria de poder resumir en una sola ordre de la terminal. Hem de crear, per tant, un script de Bash i, per obtenir una sortida ordenada, ens anirà bé emprar les comandes sed i rename. Si hem anat seguint fins aquí, haurem observat que es creen fitxers de text, que cal que tinguin extensions diferents i que, al final, haurem de poder localitzar ràpidament els resultats.</p>

  <p>Un script pot ser el següent:</p>

  <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="lineno"> 1 </span><span class="c">#!/bin/bash</span>
<span class="lineno"> 2 </span> <span class="nb">echo</span> <span class="s2">&quot;Convertint a UTF-8...&quot;</span>
<span class="lineno"> 3 </span> <span class="k">for</span> i in <span class="k">$(</span> ls *.txt<span class="k">)</span><span class="p">;</span> <span class="k">do</span> iconv -f LATIN1 -t UTF-8 -o <span class="nv">$i</span>.utf <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span>
<span class="lineno"> 4 </span> mkdir utf
<span class="lineno"> 5 </span> <span class="k">for</span> i in <span class="k">$(</span> ls *.txt<span class="k">)</span><span class="p">;</span> <span class="k">do</span> mv <span class="nv">$i</span>.utf ./utf/<span class="nv">$i</span><span class="p">;</span> <span class="k">done</span>
<span class="lineno"> 6 </span> cp dictat ./utf/dictat.txt
<span class="lineno"> 7 </span> <span class="nb">cd </span>utf
<span class="lineno"> 8 </span> <span class="nb">echo</span> <span class="s2">&quot;Corregint...&quot;</span>
<span class="lineno"> 9 </span> <span class="k">for</span> i in <span class="k">$(</span> ls *.txt<span class="k">)</span><span class="p">;</span> <span class="k">do</span> sed <span class="s2">&quot;s/</span><span class="nv">$/</span><span class="s2">\n/&quot;</span> <span class="nv">$i</span> &gt;<span class="nv">$i</span>.nou<span class="p">;</span> <span class="k">done</span>
<span class="lineno">10 </span> <span class="k">for</span> i in <span class="k">$(</span> ls *.nou<span class="k">)</span><span class="p">;</span> <span class="k">do</span> wdiff -s <span class="nv">$i</span> dictat.txt.nou&gt; <span class="nv">$i</span>.res<span class="p">;</span> <span class="k">done</span>
<span class="lineno">11 </span> rm *.txt
<span class="lineno">12 </span> rm *.nou
<span class="lineno">13 </span> rm dictat.*
<span class="lineno">14 </span> rename <span class="s1">&#39;s/\.nou.res$//&#39;</span> *.res
<span class="lineno">15 </span> <span class="nb">echo</span> <span class="s2">&quot;Fet!&quot;</span></code></pre></div>

  <p>Al final de la seva execució, trobarem una carpeta /utf  dins de la qual hi seran els dictats dels alumnes en codificació UTF-8 i ja corregits (en aquest cas, el fitxer corregit de cada alumne contindrà tot el text amb les formes incorrectes -entre claudàtors- que ha introduït al costat de les correctes -entre claus- i, al final, l’estadística d’encerts / errors). Vegem-ne un exemple de fitxer de sortida:</p>

  <blockquote>
    <p>Els caçadors [-fortius cercan-] {+furtius cerquen+} els grans goril·les mascles per convertir el seu crani en [-petxa papers,-] {+petjapapers,+} i les mans i els [-peus,-] {+peus+} en cendrers, que venen a uns preus que s’acosten [-els-] {+als+} 50 [-dolars-] {+dòlars+} la peça. Els caçadors més [-ábils-] {+hàbils+} capturen vius [-als-] {+els+} goril·les més joves i els [-subasten-] {+subhasten+} per exportar-los [-il·legantment-] {+il·legalment+} a [-zoologics-] {+zoològics+} i col·leccions privades [-de reu-] {+d’arreu+} del món.</p>

    <p>alumne.txt: 61 paraules  47 77% comunes  0 0% esborrades  14 22% canviades</p>

    <p>dictat.txt: 59 paraules  47 79% comunes  0 0% inserides  12 20% canviades</p>
  </blockquote>

  <p>Requeriments sota Debian: per poder dur a terme aquesta tasca, cal tenir instal·lats els següents paquets (així com les seves dependències):</p>

  <ul>
    <li><a href="https://packages.debian.org/stable/libc-bin" target="_blank">libc-bin</a> (ens ofereix l’aplicació <em>iconv</em>)</li>
    <li><a href="https://packages.debian.org/stable/wdiff" target="_blank">wdiff</a></li>
    <li><a href="https://packages.debian.org/stable/sed" target="_blank">sed</a></li>
    <li><a href="https://packages.debian.org/stable/util-linux" target="_blank">util-linux</a> (ens ofereix l’aplicació <em>rename</em>)</li>
  </ul>

</div>

  </article>
  <hr />
</div>


<section class="pager">
  <ul>
    
    <li class="previous"><a href="/articles/2013/01/28/Debian_Linkat.html" title="Debian? I per què no Linkat?">&larr; Entrades més antigues</a></li>
    
    
    <li class="next"><a href="/articles/2013/03/10/video-amb-linux.html" title="Vídeo amb GNU/Linux">Entrades més noves &rarr;</a></li>
    
  </ul>
</section>

<div id="disqus_thread"></div>

<script type="text/javascript">

  var disqus_developer = 1;

var disqus_shortname ='peremig';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

<noscript>Sisplau activeu JavaScript per poder accedir als <a href="http://disqus.com/?ref_noscript">comentaris servits per Disqus.</a></noscript>



    <section class="pager">
  
  
</section>


  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>Qui sóc?</h4>
  <img title="Pere MiG" src="/images/pinguins.jpg" alt="Pere MiG"/>
  <span>Blog sobre Linux de Pere MiG, professor de català amant dels impossibles.</span>
  <br />

  

  Pots contactar amb mi a través de: <br />

  
  <a href="mailto:linux@peremig.cat" title="mailto: linux@peremig.cat"><i class="fa fa-envelope-square fa-3x"></i></a>&nbsp;
  
  
  <a href="https://github.com/peremig" title="GithubID: peremig"><i class="fa fa-github-square fa-3x"></i></a>&nbsp;
  
  
  <a href="https://twitter.com/" title="TwitterID: "><i class="fa fa-twitter-square fa-3x"></i></a>
  

  

</div>

<div class="sidebar-module">
  <h4>Cerca en el lloc</h4>
  <form onsubmit="search_google()" >
    <input type="text" id="google-search" placeholder="Google search" />
    <input type="submit" name="sa" value="Go" />
  </form>
</div>


<div class="sidebar-module"> <!-- sidebar-module-inset">-->
  <h4>Sobre el Copyright</h4>

  

  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
    <img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png">
  </a>
  <br />
  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-NonCommercial-ShareAlike</a>

  

</div>


<div class="sidebar-module">
  <h4>Entrades recents</h4>
  
  <li>
  <a href="//howto/2015/02/12/automuntar_usb_escriptura.html" title="Automuntar unitats USB amb accés a escriptura" rel="bookmark">Automuntar unitats USB amb accés a escriptura</a>
  </li>
  
  <li>
  <a href="//articles/2015/01/18/Debian_8_Acer_Aspire.html" title="Debian 8 (Jessie) en notebook Acer Aspire V5-121" rel="bookmark">Debian 8 (Jessie) en notebook Acer Aspire V5-121</a>
  </li>
  
  <li>
  <a href="//howto/2014/01/24/Emacs_fcitx.html" title="Emacs i el xinès (fcitx)" rel="bookmark">Emacs i el xinès (fcitx)</a>
  </li>
  
  <li>
  <a href="//articles/2014/01/23/problemes_ime.html" title="Els meus problemes amb els IME" rel="bookmark">Els meus problemes amb els IME</a>
  </li>
  
  <li>
  <a href="//howto/2014/01/02/de_squeeze_a_wheezy_2.html" title="De debian squeeze a wheezy (2)" rel="bookmark">De debian squeeze a wheezy (2)</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>Categories</h4>
  
  <li><a href="/categories/#articles" title="articles" rel="7">articles (7)</a></li>
  
  <li><a href="/categories/#howto" title="howto" rel="7">howto (7)</a></li>
  
</div>


<div class="sidebar-module">
  <h4>Etiquetes</h4>
  
    <a href="/tags/#ime" title="ime" rel="4">ime</a> &nbsp;
  
    <a href="/tags/#IBUS" title="IBUS" rel="2">IBUS</a> &nbsp;
  
    <a href="/tags/#Tegaki" title="Tegaki" rel="1">Tegaki</a> &nbsp;
  
    <a href="/tags/#PDF" title="PDF" rel="2">PDF</a> &nbsp;
  
    <a href="/tags/#xsane" title="xsane" rel="1">xsane</a> &nbsp;
  
    <a href="/tags/#Debian" title="Debian" rel="5">Debian</a> &nbsp;
  
    <a href="/tags/#Linkat" title="Linkat" rel="1">Linkat</a> &nbsp;
  
    <a href="/tags/#dictat" title="dictat" rel="1">dictat</a> &nbsp;
  
    <a href="/tags/#iconv" title="iconv" rel="1">iconv</a> &nbsp;
  
    <a href="/tags/#rename" title="rename" rel="1">rename</a> &nbsp;
  
    <a href="/tags/#sed" title="sed" rel="1">sed</a> &nbsp;
  
    <a href="/tags/#wdiff" title="wdiff" rel="1">wdiff</a> &nbsp;
  
    <a href="/tags/#vídeo" title="vídeo" rel="2">vídeo</a> &nbsp;
  
    <a href="/tags/#email" title="email" rel="1">email</a> &nbsp;
  
    <a href="/tags/#docència" title="docència" rel="1">docència</a> &nbsp;
  
    <a href="/tags/#corrector" title="corrector" rel="1">corrector</a> &nbsp;
  
    <a href="/tags/#gramàtica" title="gramàtica" rel="1">gramàtica</a> &nbsp;
  
    <a href="/tags/#Squeeze" title="Squeeze" rel="2">Squeeze</a> &nbsp;
  
    <a href="/tags/#Wheezy" title="Wheezy" rel="2">Wheezy</a> &nbsp;
  
    <a href="/tags/#nvidia" title="nvidia" rel="1">nvidia</a> &nbsp;
  
    <a href="/tags/#audio" title="audio" rel="1">audio</a> &nbsp;
  
    <a href="/tags/#AC'97" title="AC'97" rel="1">AC'97</a> &nbsp;
  
    <a href="/tags/#SCIM" title="SCIM" rel="1">SCIM</a> &nbsp;
  
    <a href="/tags/#UIM" title="UIM" rel="1">UIM</a> &nbsp;
  
    <a href="/tags/#FCITX" title="FCITX" rel="2">FCITX</a> &nbsp;
  
    <a href="/tags/#emacs" title="emacs" rel="1">emacs</a> &nbsp;
  
    <a href="/tags/#Jessie" title="Jessie" rel="2">Jessie</a> &nbsp;
  
    <a href="/tags/#usb" title="usb" rel="1">usb</a> &nbsp;
  
</div>


<div class="sidebar-module">
  <h4>Blogroll</h4>
  
  <li><a href="https://elageminada.wordpress.com" title="Bloc de llengua i literatura catalanes">Elageminada</a></li>
  
  <li><a href="https://hanyucat.wordpress.com/" title="Materials en català per a l'estudi de la llengua xinesa">Hanyu – Cat</a></li>
  
</div>


<div class="sidebar-module">
  <h4>Arxius</h4>

  
  
  
  
  
  <li id="2015" > <a href="/archives/#2015">2015</a></li>
  
  
  
  
  
  
  
  
  
  
  <li id="2014" > <a href="/archives/#2014">2014</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2013" > <a href="/archives/#2013">2013</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2011" > <a href="/archives/#2011">2011</a></li>
  
  
  
  
  

</div>


</div>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">Buscant pingüins al pol nord</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> 
  a 
  
  <a href="https://github.com/">Github</a>
  
  | Tema <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Dissenyat per <a href="http://yulijia.net">Lijia Yu</a>  


  <div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
    <a title="Back To Top"><img src="/images/topbutton.png"/></a>
  </div>

  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/totop.js"></script>  



</footer>


</div>

</body>

</html>
